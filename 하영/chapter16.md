# chapter 16 : 타임라인사이에 자원 공유하기

자원을 공유해야하는 경우 안전하게 공유하기 위한 **동시성 기본형**을 알아본다.

## DOM이 업데이트 되는 순서 보장하기

- 큐에 들어온 순서대로 진행하면 통제할 수 있음
  **큐** : 넣은 순서대로 항목을 꺼낼수 있는 데이터 구조
- 큐에 있는 작업은 모드 같은 타임라인에서 처리된다.
- 전역변수 , DOM , 지역변수 공유, 데이터베이스, api호출 => 공유하면 타임라인은 문제가 될 수 있다.

## 자바스크립트에서 큐 만든다.

- 자바스크립트에는 큐 자료구조가 없음
- 큐를 타임라인 조율에 사용하면 **동시성 기본형**
- **동시성 기본형** : 자원을 안전하게 공유할 수 있는 재사용 가능한 코드

> 1. 큐에서 처리할 작업을 큐에 넣는 액션 하나로 바꾸기
> 2. 두번째 타임라인이 첫번째 타임라인과 동시에 실행되는것을 막기
> 3. 비동기로 작업을 이어서 할 수 있는 반복구조 만들기
> 4. 항목이 없을때 멈추기
> 5. 변수와 함수를 함수 범위로 만들기 -> 전역변수는 잠재적으로 문제가 될 수 있음.
> 6. 큐를 재사용할 수 있도록 만들기 -> 함수 본문을 콜백으로 바꾸기 등등
