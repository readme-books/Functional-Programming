# chapter 9 : 계층형 설계 2

## 계층형 설계 패턴

1. 직접구현
2. 추상화 벽

- 팀 간 책임을 명확하게 나눔
- 추상화벽) 세부 구현을 감춘 함수로 이루어진 계층
- 추상화 벽에 있는 함수 사용시, 구현을 전혀 몰라도 사용할 수 있어야한다.
  -> 데이터 구조를 몰라도 함수 사용 가능해야함.
- 라이브러리나 API 사용하는것과 비슷함 -> 독립적으로 사용할 수 있음 & 개발팀이 데이터 구조를 변경해도 다른 팀이 코드를 바꾸지 않아도 됨 (의존적이지 않다 라는 뜻과 비슷)
- "어떤것을 신경쓰지 않아도 되지? 라는 말을 거창하게 표현한 개념"
  ex) 장바구니의 구조가 배열 -> 객체로 변화해도 다른 팀에서 장바구니의 구조가 바꼈음을 알지 않아도 되는 상황

3. 작은 인터페이스

- 새로운 코드를 추가할 위치에 관한것
- 추상화 벽에 있는 인터페이스로 어떤 값의 집합에 접근하거나 값을 조작할 수 있다.
- 인터페이스를 최소화 하여 하위 계층에 불필요한 기능이 쓸데없이 커지지 않게 막아야함
  - 낮은 수준의 코드는 이해하기 더 어려워짐
  - 추상화 벽에 코드가 많을수록 구현이 변경되었을때 변경해야할점이 많아짐
  - 추상화 벽에 인터페이스가 많으면 사용하기 어려움
- 상위 계층에 어떤 함수를 만들때 가능한 현재 계층에 있는 함수로 구현하는것이 작은 인터페이스를 실천하는 방법

4. 편리한 계층

- 개발자의 요구를 만족시키면서 비즈니스 문제를 잘 풀수 있어야한다.
- 코드와 그 코드가 속한 추상화 계층은 작업할때 편리해야한다.

## 호출그래프

기능적 요구사항 : 소프트웨어가 해야하는일
비기능적 요구사항

- 유지보수성 : 요구사항이 바뀌었을때 가장 쉽게 고칠수있는 코드 -> 그래프의 가장 위에 있을수록 고치기 쉽다.
- 테스트성 : 아래에 있는 코드는 테스트가 중요하다 -> 제대로 만들었다면 가장 아래에 있는 코드보다 가장 위에 있는 코드가 더 자주 바꿀것이기때문에 아래쪽 함수는 테스트코드도 자주 고칠 필요가 없어야한다. ->아래쪽 함수를 테스트하는것이 위쪽 함수 테스트하는것보다 가치있음
- 재사용성 : 함수를 쉽게 재사용할 수 있어야함. -> 아래쪽에 함수가 적을수록 더 재사용하기 좋다. 낮은 수준의 단계로 함수를 빼면 재사용성이 높아진다.
